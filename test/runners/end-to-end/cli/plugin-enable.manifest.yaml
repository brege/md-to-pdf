name: plugin enable (End-to-End Test) src/cli/commands/plugin/enable.test.js
test_id: 3.7.1
base_command: oshea
tags:
  - plugin
  - enable
  - cli
  - smoke
  - collection
  - happy-path
workflow: true
scenarios:
  - description: should create a collection with a plugin to enable
    test_id: 3.7.1.1
    args: >-
      collection add {{paths.fixturesDir}}/full-fat-dummies/valid-collection
      --name test-collection
    expect:
      executes: true
      contains: Successfully
  - description: should successfully enable a plugin from a collection without validation
    test_id: 3.7.1.2
    args: >-
      plugin enable test-collection/valid-collection-plugin-1 --bypass-validation
    expect:
      executes: true
      contains: Attempting to enable plugin
---
name: plugin enable (End-to-End Test) src/cli/commands/plugin/enable.test.js
test_id: 3.7.2
base_command: oshea
tags:
  - plugin
  - enable
  - cli
  - smoke
  - collection
  - validation
  - happy-path
scenarios:
  - description: should successfully create a collection with a valid plugin
    test_id: 3.7.2.1
    args: >-
      collection add {{paths.fixturesDir}}/full-fat-dummies/valid-collection
      --name valid-coll
    expect:
      executes: true
      contains: Successfully
  - description: should successfully enable a valid plugin from a collection
    test_id: 3.7.2.2
    args: plugin enable valid-coll/valid-collection-plugin-1
    expect:
      executes: true
      contains: Attempting to enable plugin
---
name: plugin enable (End-to-End Test) src/cli/commands/plugin/enable.test.js
test_id: 3.7.3
base_command: oshea
tags:
  - plugin
  - enable
  - cli
  - smoke
  - validation
  - sad-path
scenarios:
  - description: should create a collection with an invalid plugin
    test_id: 3.7.3.1
    args: collection add {{tmpdir}}/invalid-coll --name invalid-coll
    expect:
      executes: true
      contains: Successfully
    breakage:
      plugin: invalid-plugin
      type: missing-handler
      collection: invalid-coll
  - description: should fail to enable an invalid plugin and reports validation errors
    test_id: 3.7.3.2
    args: plugin enable invalid-coll/invalid-plugin
    expect:
      executes: false
      contains_all:
        - Plugin validation failed
        - Missing required file
