# config.test.yaml
# Configuration for automated testing. Aims for predictable outputs.

# --- Global Settings ---
pdf_viewer: null # Disable auto-opening PDFs during tests

global_pdf_options:
  format: "Letter"
  printBackground: true
  margin:
    top: "1in"
    right: "1in"
    bottom: "1in"
    left: "1in"
  # For testing, we generally don't want variable header/footers unless testing them.
  # displayHeaderFooter: false # Keep it simple unless a test needs it.

global_remove_shortcodes:
  - "" # Remove HTML comments

# --- Document Type Specific Configurations ---
document_types:
  default:
    description: "Default settings for testing."
    css_files: ["default.css"]
    pdf_options: { format: "A4" } # Minimal override
    toc_options: { enabled: false }
    inject_fm_title_as_h1: false
    aggressiveHeadingCleanup: false

  cv:
    description: "Test settings for CV documents."
    css_files: ["cv.css"]
    pdf_options:
      format: "Letter"
      margin: { top: "0.75in", right: "0.75in", bottom: "0.75in", left: "0.75in" }
    toc_options: { enabled: false }
    inject_fm_title_as_h1: true

  cover-letter:
    description: "Test settings for Cover Letter documents."
    css_files: ["cover-letter.css"]
    pdf_options:
      format: "Letter"
      margin: { top: "1in", right: "1in", bottom: "1in", left: "1in" }
    toc_options: { enabled: false }
    # Filename for cover letter test will be explicitly set by the test script to avoid dynamic date issues.
    # inject_fm_title_as_h1: false # As per example config

  recipe:
    description: "Test settings for individual Recipe documents."
    css_files: ["recipe.css"]
    pdf_options:
      margin: { top: "0.8in", right: "0.8in", bottom: "0.8in", left: "0.8in" }
    toc_options: { enabled: false }
    remove_shortcodes_patterns:
      - "{{%\\s*recipe\\s*%}}"
      - "{{%\\s*/recipe\\s*%}}"
    inject_fm_title_as_h1: true
    aggressiveHeadingCleanup: true

  recipe-book:
    description: "Test settings for the Recipe Book PDF."
    css_files: ["recipe.css", "recipe-book.css"]
    pdf_options:
      margin: { top: "0.8in", right: "0.8in", bottom: "0.8in", left: "0.8in" }
    cover_page: # Test with cover page enabled
      enabled: true
      title: "Test Recipe Book"
      subtitle: "Generated by Automated Tests"
      author: "Test Script"
    toc_options: # Test with TOC enabled
      enabled: true
      placeholder: "%%RECIPE_BOOK_TOC%%"
      level: [1]
      listType: "ol"
    remove_shortcodes_patterns:
      - "{{%\\s*recipe\\s*%}}"
      - "{{%\\s*/recipe\\s*%}}"

# --- Hugo Export Each Command Specific Configuration ---
hugo_export_each:
  default_rules: # Ruleset used by the test script
    author_extraction_regex: "^[ \\t]*\\**(?:Chef|Chefs):\\s*\\**([^\\*<\\n\\r]+)"
    author_is_list_regex: "^[ \\t]*\\**(?:Chefs):"
    additional_shortcodes_to_remove:
      - "{{%\\s*recipe\\s*%}}"
      - "{{%\\s*/recipe\\s*%}}"
      # Add other Hugo-specific shortcodes present in examples/hugo-example if any, e.g.:
      # - "{{<\\s*ref\\s+[^>]*?>}}"
      # - "{{<\\s*gallery\\s*>}}"
